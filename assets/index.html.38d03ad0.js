import{_ as n,o as a,c as s,a as e}from"./app.764d674e.js";const t={},o=e(`<p>\u672C\u6587\u5C06\u4ECB\u7ECD\u5982\u4F55\u4F7F\u7528 Docker Compose \u642D\u5EFA\u4E00\u4E2A\u5B8C\u6574\u7684\u4EE5\u592A\u574A\uFF08ETH\uFF09\u8282\u70B9\uFF0C\u5E76\u96C6\u6210\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\uFF08Lighthouse\uFF09\uFF0C\u4EE5\u652F\u6301\u4EE5\u592A\u574A 2.0 \u7684\u6743\u76CA\u8BC1\u660E\uFF08PoS\uFF09\u5171\u8BC6\u673A\u5236\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u4F60\u53EF\u4EE5\u8F7B\u677E\u5730\u5728\u672C\u5730\u6216\u4E91\u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u4E00\u4E2A\u5B8C\u6574\u7684\u4EE5\u592A\u574A\u8282\u70B9\u3002</p><h3 id="\u63A8\u8350\u786C\u4EF6\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u63A8\u8350\u786C\u4EF6\u914D\u7F6E" aria-hidden="true">#</a> \u63A8\u8350\u786C\u4EF6\u914D\u7F6E</h3><ul><li><strong>CPU</strong>: 8 \u6838\u4EE5\u4E0A</li><li><strong>\u5185\u5B58</strong>: 16GB \u6216\u4EE5\u4E0A</li><li><strong>\u5B58\u50A8</strong>: \u9AD8\u6027\u80FD SSD\uFF0C\u81F3\u5C11 1TB \u7684\u7A7A\u95F2\u7A7A\u95F4</li><li><strong>\u7F51\u7EDC</strong>: \u81F3\u5C11 100MB/s \u4E0B\u8F7D\u901F\u5EA6\u7684\u7F51\u7EDC\u670D\u52A1</li></ul><h2 id="\u524D\u63D0\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u524D\u63D0\u6761\u4EF6" aria-hidden="true">#</a> \u524D\u63D0\u6761\u4EF6</h2><ol><li><p><strong>Docker</strong> \u548C <strong>Docker Compose</strong> \u5B89\u88C5\uFF1A</p><ul><li>\u4F60\u9700\u8981\u5B89\u88C5 Docker \u548C Docker Compose \u6765\u8FD0\u884C\u670D\u52A1\u3002\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u884C\u5B89\u88C5\uFF1A</li></ul><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker.io
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">docker-compose</span>
</code></pre></div></li><li><p><strong>\u670D\u52A1\u5668\u914D\u7F6E</strong>\uFF1A</p><ul><li>\u63A8\u8350\u4F7F\u7528\u81F3\u5C11 4 CPU \u548C 16 GB \u5185\u5B58\u7684\u670D\u52A1\u5668\u6765\u8FD0\u884C\u4EE5\u592A\u574A\u8282\u70B9\u548C\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\u3002</li><li>\u786E\u4FDD\u670D\u52A1\u5668\u6709\u8DB3\u591F\u7684\u78C1\u76D8\u7A7A\u95F4\u6765\u5B58\u50A8\u533A\u5757\u94FE\u6570\u636E\uFF08500GB \u4EE5\u4E0A\uFF09\u3002</li></ul></li></ol><h2 id="\u73AF\u5883\u642D\u5EFA\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u642D\u5EFA\u6B65\u9AA4" aria-hidden="true">#</a> \u73AF\u5883\u642D\u5EFA\u6B65\u9AA4</h2><h3 id="_1-\u521B\u5EFA-docker-compose-\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-\u521B\u5EFA-docker-compose-\u6587\u4EF6" aria-hidden="true">#</a> 1. \u521B\u5EFA Docker Compose \u6587\u4EF6</h3><p>\u9996\u5148\uFF0C\u521B\u5EFA\u4E00\u4E2A\u76EE\u5F55\u6765\u5B58\u50A8 Docker Compose \u914D\u7F6E\u6587\u4EF6\u548C\u6570\u636E\u5377\u3002</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">mkdir</span> ~/eth-node
<span class="token builtin class-name">cd</span> ~/eth-node
</code></pre></div><p>\u7136\u540E\u521B\u5EFA <code>docker-compose.yml</code> \u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">nano</span> docker-compose.yml
</code></pre></div><h3 id="_2-\u914D\u7F6E-docker-compose-\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-\u914D\u7F6E-docker-compose-\u6587\u4EF6" aria-hidden="true">#</a> 2. \u914D\u7F6E Docker Compose \u6587\u4EF6</h3><p>\u5728 <code>docker-compose.yml</code> \u4E2D\uFF0C\u914D\u7F6E\u4EE5\u592A\u574A Geth \u8282\u70B9\uFF08\u6267\u884C\u5C42\uFF09\u548C\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\uFF08Lighthouse\uFF09\u3002\u4EE5\u4E0B\u662F Docker Compose \u6587\u4EF6\u7684\u793A\u4F8B\uFF1A</p><div class="language-yaml ext-yml"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">eth-node</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ethereum/client<span class="token punctuation">-</span>go<span class="token punctuation">:</span>stable
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> geth<span class="token punctuation">-</span>node
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /www/data<span class="token punctuation">:</span>/root/.ethereum
      <span class="token punctuation">-</span> /www/data/prysm/jwtsecret<span class="token punctuation">:</span>/root/.ethereum/geth/jwtsecret
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8545:8545&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8546:8546&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;30303:30303&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8551:8551&quot;</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
      --http
      --http.addr 0.0.0.0
      --http.port 8545
      --http.api eth,web3,net,personal,txpool
      --ws
      --ws.addr 0.0.0.0
      --ws.port 8546
      --ws.api eth,web3,net,personal,txpool
      --syncmode &quot;snap&quot;
      --networkid 1
      --authrpc.port 8551
      --authrpc.addr 0.0.0.0
      --authrpc.vhosts=*
      --authrpc.jwtsecret /root/.ethereum/geth/jwtsecret</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> eth<span class="token punctuation">-</span>network
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped

  <span class="token key atrule">lighthouse-beacon-node</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> sigp/lighthouse<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> lighthouse<span class="token punctuation">-</span>beacon<span class="token punctuation">-</span>node
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /www/data/lighthouse<span class="token punctuation">:</span>/data
      <span class="token punctuation">-</span> /www/data/prysm/jwtsecret<span class="token punctuation">:</span>/root/jwtsecret
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5052:5052&quot;</span>  <span class="token comment"># Lighthouse HTTP API</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9000:9000&quot;</span>  <span class="token comment"># Lighthouse P2P \u7AEF\u53E3</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
      lighthouse bn
      --datadir /data
      --execution-endpoint http://eth-node:8551
      --http
      --metrics
      --execution-jwt=/root/jwtsecret
      --subscribe-all-subnets
      --checkpoint-sync-url https://mainnet-checkpoint-sync.stakely.io
      --disable-deposit-contract-sync</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> eth<span class="token punctuation">-</span>node
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> eth<span class="token punctuation">-</span>network
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">eth-network</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
</code></pre></div><h3 id="_3-\u751F\u6210-jwt-\u5BC6\u94A5" tabindex="-1"><a class="header-anchor" href="#_3-\u751F\u6210-jwt-\u5BC6\u94A5" aria-hidden="true">#</a> 3. \u751F\u6210 JWT \u5BC6\u94A5</h3><p>Geth \u548C Lighthouse \u9700\u8981\u5171\u4EAB\u4E00\u4E2A JWT \u5BC6\u94A5\u6587\u4EF6\u8FDB\u884C\u5B89\u5168\u901A\u4FE1\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u751F\u6210 JWT \u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /www/data/prysm/
openssl rand <span class="token parameter variable">-hex</span> <span class="token number">32</span> <span class="token operator">&gt;</span> /www/data/prysm/jwtsecret
</code></pre></div><h3 id="_4-\u542F\u52A8-docker-compose" tabindex="-1"><a class="header-anchor" href="#_4-\u542F\u52A8-docker-compose" aria-hidden="true">#</a> 4. \u542F\u52A8 Docker Compose</h3><p>\u5728\u914D\u7F6E\u597D <code>docker-compose.yml</code> \u6587\u4EF6\u5E76\u751F\u6210 JWT \u5BC6\u94A5\u540E\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u542F\u52A8\u670D\u52A1\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre></div><p>\u8FD9\u5C06\u542F\u52A8 Geth\uFF08\u6267\u884C\u5C42\uFF09\u548C Lighthouse\uFF08\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\uFF09\u3002<code>-d</code> \u53C2\u6570\u786E\u4FDD\u670D\u52A1\u5728\u540E\u53F0\u8FD0\u884C\u3002</p><h3 id="_5-\u67E5\u770B\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_5-\u67E5\u770B\u65E5\u5FD7" aria-hidden="true">#</a> 5. \u67E5\u770B\u65E5\u5FD7</h3><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u67E5\u770B Geth \u548C Lighthouse \u7684\u65E5\u5FD7\uFF0C\u786E\u4FDD\u8282\u70B9\u6B63\u5E38\u542F\u52A8\u5E76\u540C\u6B65\uFF1A</p><ul><li><p>\u67E5\u770B Geth \u65E5\u5FD7\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker</span> logs geth-node
</code></pre></div></li><li><p>\u67E5\u770B Lighthouse \u65E5\u5FD7\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker</span> logs lighthouse-beacon-node
</code></pre></div></li></ul><h3 id="_6-\u68C0\u67E5\u540C\u6B65\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_6-\u68C0\u67E5\u540C\u6B65\u72B6\u6001" aria-hidden="true">#</a> 6. \u68C0\u67E5\u540C\u6B65\u72B6\u6001</h3><h4 id="geth-\u6267\u884C\u5C42" tabindex="-1"><a class="header-anchor" href="#geth-\u6267\u884C\u5C42" aria-hidden="true">#</a> Geth\uFF08\u6267\u884C\u5C42\uFF09</h4><p>Geth \u63D0\u4F9B\u4E86 HTTP \u548C WebSocket API\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u5B83\u4EEC\u68C0\u67E5\u540C\u6B65\u72B6\u6001\u3002\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDE\u63A5\u5230 Geth \u8282\u70B9\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token parameter variable">--data</span> <span class="token string">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_syncing&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span> http://localhost:8545
</code></pre></div><p>\u5982\u679C\u8FD4\u56DE\u7ED3\u679C\u4E3A <code>false</code>\uFF0C\u8BF4\u660E\u540C\u6B65\u5DF2\u7ECF\u5B8C\u6210\u3002</p><h4 id="lighthouse-\u4FE1\u6807\u94FE" tabindex="-1"><a class="header-anchor" href="#lighthouse-\u4FE1\u6807\u94FE" aria-hidden="true">#</a> Lighthouse\uFF08\u4FE1\u6807\u94FE\uFF09</h4><p>Lighthouse \u63D0\u4F9B\u4E86 HTTP API\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5B83\u67E5\u770B\u4FE1\u6807\u94FE\u7684\u540C\u6B65\u72B6\u6001\u3002\u4F60\u53EF\u4EE5\u8BBF\u95EE\u4EE5\u4E0B\u5730\u5740\u6765\u68C0\u67E5\u72B6\u6001\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code>http://localhost:5052
</code></pre></div><h3 id="_7-\u505C\u6B62\u548C\u91CD\u542F\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#_7-\u505C\u6B62\u548C\u91CD\u542F\u8282\u70B9" aria-hidden="true">#</a> 7. \u505C\u6B62\u548C\u91CD\u542F\u8282\u70B9</h3><ul><li><p>\u505C\u6B62\u8282\u70B9\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> down
</code></pre></div></li><li><p>\u91CD\u542F\u8282\u70B9\uFF1A</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre></div></li></ul><h3 id="_8-\u4F7F\u7528\u68C0\u67E5\u70B9\u540C\u6B65-checkpoint-sync" tabindex="-1"><a class="header-anchor" href="#_8-\u4F7F\u7528\u68C0\u67E5\u70B9\u540C\u6B65-checkpoint-sync" aria-hidden="true">#</a> 8. \u4F7F\u7528\u68C0\u67E5\u70B9\u540C\u6B65\uFF08Checkpoint Sync\uFF09</h3><p>\u4E3A\u4E86\u52A0\u5FEB\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\u7684\u540C\u6B65\u8FC7\u7A0B\uFF0C\u63A8\u8350\u4F7F\u7528<strong>\u68C0\u67E5\u70B9\u540C\u6B65</strong>\uFF0C\u53EF\u4EE5\u4ECE\u4EE5\u4E0B\u5217\u8868\u9009\u62E9\u4E00\u4E2A\u516C\u5171\u68C0\u67E5\u70B9\u540C\u6B65 URL\uFF1A<a href="https://eth-clients.github.io/checkpoint-sync-endpoints/" target="_blank" rel="noopener noreferrer">https://eth-clients.github.io/checkpoint-sync-endpoints/</a>\u3002</p><p>\u5728 Docker Compose \u6587\u4EF6\u4E2D\uFF0C\u786E\u4FDD\u5728 <code>lighthouse</code> \u542F\u52A8\u547D\u4EE4\u4E2D\u6DFB\u52A0 <code>--checkpoint-sync-url</code> \u53C2\u6570\uFF1A</p><div class="language-yaml ext-yml"><pre class="language-yaml"><code><span class="token punctuation">-</span><span class="token punctuation">-</span>checkpoint<span class="token punctuation">-</span>sync<span class="token punctuation">-</span>url https<span class="token punctuation">:</span>//your<span class="token punctuation">-</span>checkpoint<span class="token punctuation">-</span>sync<span class="token punctuation">-</span>url
</code></pre></div><h3 id="_9-\u7ED3\u8BBA" tabindex="-1"><a class="header-anchor" href="#_9-\u7ED3\u8BBA" aria-hidden="true">#</a> 9. \u7ED3\u8BBA</h3><p>\u901A\u8FC7\u672C\u6587\uFF0C\u4F60\u5DF2\u7ECF\u6210\u529F\u4F7F\u7528 Docker Compose \u642D\u5EFA\u4E86\u4E00\u4E2A\u5B8C\u6574\u7684\u4EE5\u592A\u574A\u8282\u70B9\uFF0C\u5305\u62EC\u6267\u884C\u5C42\uFF08Geth\uFF09\u548C\u4FE1\u6807\u94FE\u5BA2\u6237\u7AEF\uFF08Lighthouse\uFF09\u3002\u8FD9\u79CD\u65B9\u6CD5\u4F7F\u5F97\u90E8\u7F72\u548C\u7BA1\u7406\u8282\u70B9\u53D8\u5F97\u975E\u5E38\u65B9\u4FBF\uFF0C\u5E76\u4E14\u80FD\u591F\u652F\u6301\u4EE5\u592A\u574A 2.0 \u7684\u6743\u76CA\u8BC1\u660E\u5171\u8BC6\u673A\u5236\u3002\u4F60\u53EF\u4EE5\u6839\u636E\u9700\u8981\u6269\u5C55\u6216\u4FEE\u6539\u6B64\u914D\u7F6E\uFF0C\u4F8B\u5982\u589E\u52A0\u76D1\u63A7\u5DE5\u5177\u6216\u5176\u4ED6\u5BA2\u6237\u7AEF\u3002</p><hr><h3 id="\u53C2\u8003\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6E90" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6E90</h3><ul><li><a href="https://lighthouse-book.sigmaprime.io/" target="_blank" rel="noopener noreferrer">Lighthouse \u6587\u6863</a></li><li><a href="https://geth.ethereum.org/docs/" target="_blank" rel="noopener noreferrer">Geth \u6587\u6863</a></li></ul>`,43),p=[o];function c(l,r){return a(),s("div",null,p)}var i=n(t,[["render",c],["__file","index.html.vue"]]);export{i as default};
