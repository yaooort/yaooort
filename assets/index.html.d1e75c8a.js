import{_ as n,o as s,c as a,a as t}from"./app.c5efd899.js";const p={},o=t(`<p>\u5173\u4E8E\u5982\u4F55\u80FD\u628A\u817E\u8BAF\u89C6\u9891\u4E0B\u8F7D\u4E0B\u6765\u7684\u74E6\u7279</p><blockquote><p>\u4E8B\u4EF6\u8D77\u56E0</p></blockquote><h5 id="\u6700\u8FD1\u6CA1\u7F51-\u524D\u4E24\u5929\u53BB\u670B\u53CB\u90A3\u7F13\u5B58\u4E86\u51E0\u90E8\u7535\u5F71-1080p\u9AD8\u6E05\u89C6\u9891\u4E0B\u8F7D\u901F\u5EA6\u5237\u5237\u7684\u3002\u62FF\u56DE\u6765\u64AD\u653E\u7684\u65F6\u5019\u5C31\u5728\u60F3-\u6211\u628A\u89C6\u9891\u7F13\u5B58\u5230\u7535\u8111\u4E86-\u90A3\u6211\u80FD\u627E\u5230\u5417-\u89C6\u9891\u662F\u4EE5mp4\u6587\u4EF6\u7F13\u5B58\u7684\u5417-\u6211\u80FD\u4E0D\u80FD\u62FF\u5230\u817E\u8BAFvip\u4F1A\u5458\u7684\u7F13\u5B58\u89C6\u9891-\u80FD\u4E0D\u80FD\u4FDD\u5B58\u9AD8\u6E05mp4" tabindex="-1"><a class="header-anchor" href="#\u6700\u8FD1\u6CA1\u7F51-\u524D\u4E24\u5929\u53BB\u670B\u53CB\u90A3\u7F13\u5B58\u4E86\u51E0\u90E8\u7535\u5F71-1080p\u9AD8\u6E05\u89C6\u9891\u4E0B\u8F7D\u901F\u5EA6\u5237\u5237\u7684\u3002\u62FF\u56DE\u6765\u64AD\u653E\u7684\u65F6\u5019\u5C31\u5728\u60F3-\u6211\u628A\u89C6\u9891\u7F13\u5B58\u5230\u7535\u8111\u4E86-\u90A3\u6211\u80FD\u627E\u5230\u5417-\u89C6\u9891\u662F\u4EE5mp4\u6587\u4EF6\u7F13\u5B58\u7684\u5417-\u6211\u80FD\u4E0D\u80FD\u62FF\u5230\u817E\u8BAFvip\u4F1A\u5458\u7684\u7F13\u5B58\u89C6\u9891-\u80FD\u4E0D\u80FD\u4FDD\u5B58\u9AD8\u6E05mp4" aria-hidden="true">#</a> \u6700\u8FD1\u6CA1\u7F51\uFF0C\u524D\u4E24\u5929\u53BB\u670B\u53CB\u90A3\u7F13\u5B58\u4E86\u51E0\u90E8\u7535\u5F71\uFF0C1080p\u9AD8\u6E05\u89C6\u9891\u4E0B\u8F7D\u901F\u5EA6\u5237\u5237\u7684\u3002\u62FF\u56DE\u6765\u64AD\u653E\u7684\u65F6\u5019\u5C31\u5728\u60F3\uFF0C\u6211\u628A\u89C6\u9891\u7F13\u5B58\u5230\u7535\u8111\u4E86\uFF0C\u90A3\u6211\u80FD\u627E\u5230\u5417\uFF1F\u89C6\u9891\u662F\u4EE5mp4\u6587\u4EF6\u7F13\u5B58\u7684\u5417\uFF1F\u6211\u80FD\u4E0D\u80FD\u62FF\u5230\u817E\u8BAFVIP\u4F1A\u5458\u7684\u7F13\u5B58\u89C6\u9891\uFF1F\u80FD\u4E0D\u80FD\u4FDD\u5B58\u9AD8\u6E05mp4\uFF1F</h5><blockquote><p>\u4E8B\u4EF6\u7ECF\u8FC7</p></blockquote><h5 id="\u62FF\u7740\u8FD9\u4E9B\u7591\u95EE-\u6211\u5C31\u6252\u62C9\u6211\u7535\u8111-macos-\u817E\u8BAF\u89C6\u9891mac\u72481-8-2-\u91CC\u9762\u7684\u7F13\u5B58\u6587\u4EF6-\u53D1\u73B0\u89C6\u9891\u7F13\u5B58\u5728\u{1F447}\u8FD9\u4E2A\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u62FF\u7740\u8FD9\u4E9B\u7591\u95EE-\u6211\u5C31\u6252\u62C9\u6211\u7535\u8111-macos-\u817E\u8BAF\u89C6\u9891mac\u72481-8-2-\u91CC\u9762\u7684\u7F13\u5B58\u6587\u4EF6-\u53D1\u73B0\u89C6\u9891\u7F13\u5B58\u5728\u{1F447}\u8FD9\u4E2A\u76EE\u5F55" aria-hidden="true">#</a> \u62FF\u7740\u8FD9\u4E9B\u7591\u95EE\uFF0C\u6211\u5C31\u6252\u62C9\u6211\u7535\u8111(macOS \u817E\u8BAF\u89C6\u9891mac\u72481.8.2)\u91CC\u9762\u7684\u7F13\u5B58\u6587\u4EF6\uFF0C\u53D1\u73B0\u89C6\u9891\u7F13\u5B58\u5728\u{1F447}\u8FD9\u4E2A\u76EE\u5F55</h5><p><code>/Users/\u7528\u6237/Library/Containers/com.tencent.tenvideo/Data/Library/Application Support/Download</code></p><h5 id="\u6253\u5F00\u91CC\u9762\u7684video\u6587\u4EF6\u5939\u4E00\u770B-\u6211\u6EF4\u4E2A\u795E\u3002" tabindex="-1"><a class="header-anchor" href="#\u6253\u5F00\u91CC\u9762\u7684video\u6587\u4EF6\u5939\u4E00\u770B-\u6211\u6EF4\u4E2A\u795E\u3002" aria-hidden="true">#</a> \u6253\u5F00\u91CC\u9762\u7684video\u6587\u4EF6\u5939\u4E00\u770B\uFF0C\u6211\u6EF4\u4E2A\u795E\u3002</h5><blockquote><p>ad g00208rhr0m.320092.hls l0019sl1ggv.321003.hls c00226jie90.321003.hls j0022vz0heu.321003.hls</p></blockquote><h5 id="\u770B\u6587\u4EF6\u5939\u7ED3\u5C3E\u7684\u540D\u5B57hls-o-\u518D\u6253\u5F00\u7FFB\u5230\u6700\u91CC\u9762-\u53D1\u73B0\u91CC\u9762\u7684\u6587\u4EF6\u662F-ts-\u800C\u4E14\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E-\u6CE8\u610F\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E\u7684\u54E6-\u{1F60F}-\u6211\u8FD8\u4EE5\u4E3A\u817E\u8BAF\u4F1A\u81EA\u5B9A\u4E49\u89C6\u9891\u5934\u4FE1\u606F-\u81EA\u5B9A\u4E49\u64AD\u653E\u5668\u3002\u770B\u5230\u8FD9\u5C31\u653E\u5FC3\u4E86-\u76F4\u63A5\u4F7F\u7528ffmpeg\u5408\u5E76\u4E3A\u4E00\u4E2A\u89C6\u9891\u5C31\u884C\u3002" tabindex="-1"><a class="header-anchor" href="#\u770B\u6587\u4EF6\u5939\u7ED3\u5C3E\u7684\u540D\u5B57hls-o-\u518D\u6253\u5F00\u7FFB\u5230\u6700\u91CC\u9762-\u53D1\u73B0\u91CC\u9762\u7684\u6587\u4EF6\u662F-ts-\u800C\u4E14\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E-\u6CE8\u610F\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E\u7684\u54E6-\u{1F60F}-\u6211\u8FD8\u4EE5\u4E3A\u817E\u8BAF\u4F1A\u81EA\u5B9A\u4E49\u89C6\u9891\u5934\u4FE1\u606F-\u81EA\u5B9A\u4E49\u64AD\u653E\u5668\u3002\u770B\u5230\u8FD9\u5C31\u653E\u5FC3\u4E86-\u76F4\u63A5\u4F7F\u7528ffmpeg\u5408\u5E76\u4E3A\u4E00\u4E2A\u89C6\u9891\u5C31\u884C\u3002" aria-hidden="true">#</a> \u770B\u6587\u4EF6\u5939\u7ED3\u5C3E\u7684\u540D\u5B57hls (<sup>o</sup>)/~ \uFF0C\u518D\u6253\u5F00\u7FFB\u5230\u6700\u91CC\u9762\uFF0C\u53D1\u73B0\u91CC\u9762\u7684\u6587\u4EF6\u662F.ts \u800C\u4E14\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E\uFF0C\u6CE8\u610F\u53EF\u4EE5\u6B63\u5E38\u64AD\u653E\u7684\u54E6\uFF0C\u{1F60F}\uFF0C\uFF08\u6211\u8FD8\u4EE5\u4E3A\u817E\u8BAF\u4F1A\u81EA\u5B9A\u4E49\u89C6\u9891\u5934\u4FE1\u606F\uFF0C\u81EA\u5B9A\u4E49\u64AD\u653E\u5668\u3002\u770B\u5230\u8FD9\u5C31\u653E\u5FC3\u4E86\uFF09\u76F4\u63A5\u4F7F\u7528ffmpeg\u5408\u5E76\u4E3A\u4E00\u4E2A\u89C6\u9891\u5C31\u884C\u3002</h5><h5 id="\u518D\u7136\u540E\u642C\u51FApython\u5927\u5B9D\u5251-\u5F00\u59CB\u5288\u67F4\u3002" tabindex="-1"><a class="header-anchor" href="#\u518D\u7136\u540E\u642C\u51FApython\u5927\u5B9D\u5251-\u5F00\u59CB\u5288\u67F4\u3002" aria-hidden="true">#</a> \u518D\u7136\u540E\u642C\u51FAPython\u5927\u5B9D\u5251\uFF0C\u5F00\u59CB\u5288\u67F4\u3002</h5><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> os<span class="token punctuation">,</span>sys
<span class="token keyword">import</span> logging
<span class="token keyword">from</span> ffmpy <span class="token keyword">import</span> FFmpeg
<span class="token keyword">from</span> natsort <span class="token keyword">import</span> natsorted

logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">hls_dir_to_mp4</span><span class="token punctuation">(</span>in_path_dir<span class="token punctuation">,</span> out_path_file<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    \u5C06hls\u6587\u4EF6\u5939\u91CC\u9762\u5206\u7247\u7684\u89C6\u9891\u8F6C\u5316\u4E3A\u5355\u4E2AMP4\u6587\u4EF6
    ffmpeg -i &quot;concat:file001.ts|file002.ts|file003.ts|file004.ts......n.ts&quot; -acodec copy -vcodec copy -absf aac_adtstoasc out.mp4
    :param in_path:
    :param out_path:
    :return:
    &quot;&quot;&quot;</span>
    <span class="token comment"># \u83B7\u53D6&quot;concat:file001.ts|file002.ts|file003.ts|file004.ts......n.ts&quot;\u5217\u8868\u53C2\u6570</span>
    out_files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token builtin">dir</span> <span class="token keyword">in</span> natsorted<span class="token punctuation">(</span><span class="token punctuation">[</span>val <span class="token keyword">for</span> val <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>in_path_dir<span class="token punctuation">)</span> <span class="token keyword">if</span> val<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span>in_path_dir<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        dirPath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>in_path_dir<span class="token punctuation">,</span> <span class="token builtin">dir</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span>

        <span class="token keyword">for</span> root<span class="token punctuation">,</span> dirs<span class="token punctuation">,</span> files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">:</span>
            files <span class="token operator">=</span> natsorted<span class="token punctuation">(</span>files<span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>
                <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&#39;.ts&#39;</span><span class="token punctuation">:</span>
                    <span class="token comment"># \u62FC\u63A5\u6210\u5B8C\u6574\u8DEF\u5F84</span>
                    filePath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">)</span>
                    out_files<span class="token punctuation">.</span>append<span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>

    cmd <span class="token operator">=</span> <span class="token string">&#39;|&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>out_files<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>out_files<span class="token punctuation">)</span>
    cmd <span class="token operator">=</span> <span class="token string">&#39;concat:&#39;</span> <span class="token operator">+</span> <span class="token string">&quot;\\&quot;&quot;</span> <span class="token operator">+</span> cmd <span class="token operator">+</span> <span class="token string">&quot;\\&quot;&quot;</span>
    cmd <span class="token operator">=</span> <span class="token string">&#39;ffmpeg -i &#39;</span> <span class="token operator">+</span> cmd <span class="token operator">+</span> <span class="token string">&#39; -acodec copy -vcodec copy -absf aac_adtstoasc &#39;</span> <span class="token operator">+</span> out_path_file
    <span class="token keyword">print</span><span class="token punctuation">(</span>execCmd<span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">videoCurv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    \u8F6C\u6362\u89C6\u9891\u683C\u5F0F
    :return:
    &quot;&quot;&quot;</span>
    <span class="token comment"># \u8F6C\u6362input.mp4 \u4E3A output.avi</span>
    FFmpeg<span class="token punctuation">(</span>inputs<span class="token operator">=</span><span class="token punctuation">{</span>in_path<span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span><span class="token punctuation">,</span> outputs<span class="token operator">=</span><span class="token punctuation">{</span>out_path<span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">execCmd</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    \u6267\u884C\u8BA1\u7B97\u547D\u4EE4\u65F6\u95F4
    &quot;&quot;&quot;</span>
    r <span class="token operator">=</span> os<span class="token punctuation">.</span>popen<span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>
    text <span class="token operator">=</span> r<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    r<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> text


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
        hls_dir_to_mp4<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
        hls_dir_to_mp4<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;tmp.mp4&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;\u8BF7\u8F93\u5165\u89C6\u9891\u6240\u5728\u76EE\u5F55path&#39;</span><span class="token punctuation">)</span>
    <span class="token comment"># hls_dir_to_mp4(</span>
    <span class="token comment">#     in_path_dir=&#39;/Users/bunny/Library/Containers/com.tencent.tenvideo/Data/Library/Application Support/Download/video/g00208rhr0m.320092.hls&#39;,</span>
    <span class="token comment">#     out_path_file=&#39;1.mp4&#39;);</span>

</code></pre></div><h3 id="\u6253\u5B8C\u6536\u5DE5-\u4F7F\u7528\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u6253\u5B8C\u6536\u5DE5-\u4F7F\u7528\u65B9\u6CD5" aria-hidden="true">#</a> \u6253\u5B8C\u6536\u5DE5 \u4F7F\u7528\u65B9\u6CD5</h3><blockquote><p><strong>1.\u5B89\u88C5ffmpeg</strong></p><ul><li><code> brew install ffmpeg</code></li></ul></blockquote><blockquote><p><strong>2.<a href="https://www.python.org/downloads/" target="_blank" rel="noopener noreferrer">\u5B89\u88C5Python3</a></strong></p><p><strong>3.\u5B89\u88C5pipenv</strong></p><ul><li><code>pip install pipenv</code></li></ul><p><strong>4.\u521B\u5EFA\u865A\u62DF\u73AF\u5883\u5E76\u5B89\u88C5\u4F9D\u8D56\u5305</strong></p><ul><li><code> pipenv shell</code></li></ul><p><strong>5.\u8FDB\u5165\u865A\u62DF\u73AF\u5883\u5E76\u6267\u884C\u811A\u672C</strong></p><ul><li><p><code>pipenv shell</code></p></li><li><p><code>python tencent_video.py /Users/\u7528\u6237/Library/Containers/com.tencent.tenvideo/Data/Library/Application Support/Download/video/g00208rhr0m.320092.hls out.mp4</code></p></li></ul></blockquote><p>\u5B8C\u7ED3</p>`,15),e=[o];function c(u,l){return s(),a("div",null,e)}var k=n(p,[["render",c],["__file","index.html.vue"]]);export{k as default};
